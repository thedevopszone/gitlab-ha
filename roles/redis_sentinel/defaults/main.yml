---
# Redis server defaults
redis_port: 6379
redis_bind: "0.0.0.0"
redis_maxmemory: "256mb"
redis_maxmemory_policy: "noeviction"
redis_appendonly: "yes"
redis_appendfsync: "everysec"
redis_dir: /var/lib/redis
redis_logfile: /var/log/redis/redis-server.log
redis_pidfile: /run/redis/redis-server.pid

# Sentinel defaults
redis_sentinel_port: 26379
redis_sentinel_master_name: "mymaster"
redis_sentinel_quorum: 2
redis_sentinel_down_after_ms: 5000
redis_sentinel_failover_timeout: 10000
redis_sentinel_parallel_syncs: 1
redis_sentinel_logfile: /var/log/redis/redis-sentinel.log
redis_sentinel_dir: /var/lib/redis

# Derived: master IP from inventory (dynamic, no hardcoded IPs)
redis_master_ip: >-
  {{ groups['redis_cluster']
     | map('extract', hostvars)
     | selectattr('redis_node_role', 'equalto', 'master')
     | map(attribute='ansible_host')
     | first }}
